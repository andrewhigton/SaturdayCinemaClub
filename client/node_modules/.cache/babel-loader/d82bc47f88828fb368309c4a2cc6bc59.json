{"ast":null,"code":"import axios from 'axios';\nimport { setAlert } from './alert';\nimport { GET_PROFILE, GET_FILM // GET_FILMS,\n, GET_PROFILES, PROFILE_ERROR, CLEAR_PROFILE, FILM_ERROR // ACCOUNT_DELETED,\n} from './types'; // Get current users profile\n\nexport const getCurrentProfile = () => async dispatch => {\n  try {\n    //in dev, this is profile/me\n    const res = await axios.get('/api/profile/me'); // console.log(res.data)\n\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n};\nexport const loadProfiles = () => async dispatch => {\n  try {\n    const res = await axios.get('/api/profile');\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR //payload: { msg: err.response.statusText, status: err.response.status }\n\n    });\n  }\n}; // create film\n\nexport const createFilm = (formData, history) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }; //note - when it comes to finalisng this, get ride of profile, put it in film path\n\n    const res = await axios.post('/api/profile/create-film', formData, config);\n    dispatch({\n      type: GET_FILM,\n      payload: res.data\n    }); // dispatch(setAlert(edit ? 'Film updated' : 'Film created', 'success'));\n    // if(!edit) {\n    //   history.push('/dashboard');\n    // }\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; //get FIlmById\n// export const getFilmById = filmId => async dispatch => {\n//   try {\n//     const res = await axios.get(`/api/profile/user/${filmId}`);\n//     dispatch({\n//       type: GET_FILM,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n//     const res = await axios.put('/api/profile/booking', formData, config);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n//     //what does this do? \n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n//dont need this\n// Get all Films\n// export const loadFilms = () => async dispatch => {\n//   try {\n//     const res = await axios.get('/api/profile');\n//     dispatch({\n//       type: GET_PROFILE,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       //payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n// const res = await axios.put('/api/profile/booking', formData, config);\n//     const res = await axios.post('/api/profile/booking', formData, config);\n//     //console.log(res);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n//     //what does this do? \n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n//     dispatch({\n//       type: FILM_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n// update film\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n//     const res = await axios.put('/api/film/booking', formData, config);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n// const res = await axios.put('/api/profile/booking', formData, config);\n// // Get all profiles\n// export const getProfiles = () => async dispatch => {\n//   dispatch({ type: CLEAR_PROFILE });\n//   try {\n//     const res = await axios.get('/api/profile');\n//     dispatch({\n//       type: GET_PROFILES,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n// // Delete account & profile\n// export const deleteAccount = () => async dispatch => {\n//   if (window.confirm('Are you sure? This can NOT be undone!')) {\n//     try {\n//       await axios.delete('/api/profile');\n//       dispatch({ type: CLEAR_PROFILE });\n//       dispatch({ type: ACCOUNT_DELETED });\n//       dispatch(setAlert('Your account has been permanantly deleted'));\n//     } catch (err) {\n//       dispatch({\n//         type: PROFILE_ERROR,\n//         payload: { msg: err.response.statusText, status: err.response.status }\n//       });\n//     }\n//   }\n// };","map":{"version":3,"sources":["/Users/andrewhigton/Documents/mern/SatCinemaClub/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","GET_FILM","GET_PROFILES","PROFILE_ERROR","CLEAR_PROFILE","FILM_ERROR","getCurrentProfile","dispatch","res","get","type","payload","data","err","msg","response","statusText","status","loadProfiles","createFilm","formData","history","config","headers","post","errors","forEach","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,SAAzB;AAEA,SACEC,WADF,EAEEC,QAFF,CAGE;AAHF,EAIEC,YAJF,EAKEC,aALF,EAMEC,aANF,EAOEC,UAPF,CAQE;AARF,OASO,SATP,C,CAYA;;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAM,MAAMC,QAAN,IAAkB;AACvD,MAAI;AACF;AACA,UAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAU,iBAAV,CAAlB,CAFE,CAGF;;AACAF,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEV,WADC;AAEPW,MAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,KAAD,CAAR;AAID,GARD,CAQE,OAAOC,GAAP,EAAY;AACZN,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEP,aADC;AAEPQ,MAAAA,OAAO,EAAE;AAAEG,QAAAA,GAAG,EAAED,GAAG,CAACE,QAAJ,CAAaC,UAApB;AAAgCC,QAAAA,MAAM,EAAEJ,GAAG,CAACE,QAAJ,CAAaE;AAArD;AAFF,KAAD,CAAR;AAID;AACF,CAfM;AAoBP,OAAO,MAAMC,YAAY,GAAG,MAAM,MAAMX,QAAN,IAAkB;AAElD,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAU,cAAV,CAAlB;AAEAF,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAER,YADC;AAEPS,MAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,KAAD,CAAR;AAID,GAPD,CAOE,OAAOC,GAAP,EAAY;AACZN,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEP,aADC,CAEP;;AAFO,KAAD,CAAR;AAID;AACA,CAfI,C,CAiBP;;AACA,OAAO,MAAMgB,UAAU,GAAG,CAAEC,QAAF,EAAYC,OAAZ,KAAyB,MAAMd,QAAN,IAAkB;AACnE,MAAI;AACF,UAAMe,MAAM,GAAG;AACbC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AADI,KAAf,CADE,CAMF;;AACA,UAAMf,GAAG,GAAG,MAAMV,KAAK,CAAC0B,IAAN,CAAW,0BAAX,EAAuCJ,QAAvC,EAAiDE,MAAjD,CAAlB;AACAf,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAET,QADC;AAEPU,MAAAA,OAAO,EAAEH,GAAG,CAACI;AAFN,KAAD,CAAR,CARE,CAaF;AAEA;AACA;AACA;AACD,GAlBD,CAkBE,OAAOC,GAAP,EAAY;AACZ,UAAMY,MAAM,GAAGZ,GAAG,CAACE,QAAJ,CAAaH,IAAb,CAAkBa,MAAjC;;AAEA,QAAIA,MAAJ,EAAY;AACVA,MAAAA,MAAM,CAACC,OAAP,CAAeC,KAAK,IAAIpB,QAAQ,CAACR,QAAQ,CAAC4B,KAAK,CAACb,GAAP,EAAY,QAAZ,CAAT,CAAhC;AACD;;AAEDP,IAAAA,QAAQ,CAAC;AACPG,MAAAA,IAAI,EAAEP,aADC;AAEPQ,MAAAA,OAAO,EAAE;AAAEG,QAAAA,GAAG,EAAED,GAAG,CAACE,QAAJ,CAAaC,UAApB;AAAgCC,QAAAA,MAAM,EAAEJ,GAAG,CAACE,QAAJ,CAAaE;AAArD;AAFF,KAAD,CAAR;AAID;AACF,CA/BM,C,CAiCP;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEI;AACJ;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from 'axios';\nimport { setAlert } from './alert';\n\nimport {\n  GET_PROFILE,\n  GET_FILM,\n  // GET_FILMS,\n  GET_PROFILES,\n  PROFILE_ERROR,\n  CLEAR_PROFILE,\n  FILM_ERROR\n  // ACCOUNT_DELETED,\n} from './types';\n\n\n// Get current users profile\nexport const getCurrentProfile = () => async dispatch => {\n  try {\n    //in dev, this is profile/me\n    const res = await axios.get('/api/profile/me');\n    // console.log(res.data)\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n\n\n\nexport const loadProfiles = () => async dispatch => {\n  \n  try {\n    const res = await axios.get('/api/profile');\n\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      //payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n  };\n\n// create film\nexport const createFilm = ( formData, history ) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    //note - when it comes to finalisng this, get ride of profile, put it in film path\n    const res = await axios.post('/api/profile/create-film', formData, config);    \n    dispatch({\n      type: GET_FILM,\n      payload: res.data\n    });\n\n    // dispatch(setAlert(edit ? 'Film updated' : 'Film created', 'success'));\n\n    // if(!edit) {\n    //   history.push('/dashboard');\n    // }\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: { msg: err.response.statusText, status: err.response.status }\n    });\n  }\n};\n\n//get FIlmById\n// export const getFilmById = filmId => async dispatch => {\n//   try {\n//     const res = await axios.get(`/api/profile/user/${filmId}`);\n\n//     dispatch({\n//       type: GET_FILM,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n\n    \n//     const res = await axios.put('/api/profile/booking', formData, config);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n//     //what does this do? \n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n//dont need this\n// Get all Films\n// export const loadFilms = () => async dispatch => {\n  \n//   try {\n//     const res = await axios.get('/api/profile');\n\n//     dispatch({\n//       type: GET_PROFILE,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       //payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n\n    // const res = await axios.put('/api/profile/booking', formData, config);\n//     const res = await axios.post('/api/profile/booking', formData, config);\n//     //console.log(res);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n//     //what does this do? \n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n\n//     dispatch({\n//       type: FILM_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n// update film\n// export const updateFilm = (formData, history) => async dispatch => {\n//   try {\n//     const config = {\n//       headers: {\n//         'Content-Type': 'application/json'\n//       }\n//     };\n\n//     const res = await axios.put('/api/film/booking', formData, config);\n//     dispatch({\n//       type: UPDATE_FILM,\n//       payload: res.data\n//     });\n\n//     dispatch(setAlert('Thanks for your booking', 'success'));\n\n//     history.push('/dashboard');\n//   } catch (err) {\n//     const errors = err.response.data.errors;\n\n//     if (errors) {\n//       errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n//     }\n\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n// const res = await axios.put('/api/profile/booking', formData, config);\n    \n// // Get all profiles\n// export const getProfiles = () => async dispatch => {\n//   dispatch({ type: CLEAR_PROFILE });\n\n//   try {\n//     const res = await axios.get('/api/profile');\n\n//     dispatch({\n//       type: GET_PROFILES,\n//       payload: res.data\n//     });\n//   } catch (err) {\n//     dispatch({\n//       type: PROFILE_ERROR,\n//       payload: { msg: err.response.statusText, status: err.response.status }\n//     });\n//   }\n// };\n\n\n\n// // Delete account & profile\n// export const deleteAccount = () => async dispatch => {\n//   if (window.confirm('Are you sure? This can NOT be undone!')) {\n//     try {\n//       await axios.delete('/api/profile');\n\n//       dispatch({ type: CLEAR_PROFILE });\n//       dispatch({ type: ACCOUNT_DELETED });\n\n//       dispatch(setAlert('Your account has been permanantly deleted'));\n//     } catch (err) {\n//       dispatch({\n//         type: PROFILE_ERROR,\n//         payload: { msg: err.response.statusText, status: err.response.status }\n//       });\n//     }\n//   }\n// };"]},"metadata":{},"sourceType":"module"}