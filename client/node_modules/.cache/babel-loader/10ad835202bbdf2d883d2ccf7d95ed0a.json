{"ast":null,"code":"import _objectSpread from \"/Users/andrewhigton/Documents/mern/SatCinemaClub/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/andrewhigton/Documents/mern/SatCinemaClub/client/src/components/checkout-film/Checkout-Film.js\";\nimport React, { useEffect, useState, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams } from 'react-router';\nimport { Link, withRouter, Redirect } from 'react-router-dom'; // import { clearItemFromCart, addItem, removeItem } from '../../reducers/cart/cart.actions';\n\nimport './checkout-item.styles.scss';\n\nconst CheckoutFilm = ({\n  film\n}) => {\n  const onChange = e => {\n    //setFormData({ ...formData, [e.target.name]: e.target.value });\n    tickets = film.totalsoFar + parseInt(e.target.value);\n    setBookingTotal(parseInt(film.ticketPrice) * parseInt(e.target.value));\n    setFormData(_objectSpread({}, formData, {\n      totalsoFar: tickets\n    }));\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    console.log(formData);\n    updateFilm(formData, history);\n  };\n\n  return React.createElement(Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"checkout-page how-it-works\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"checkout-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Film: \", film.title)), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Date: \", film.date, \" \")), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Price: \\xA3\", film.ticketPrice, \" \")), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Crowdfunding Target: \", film.crowdfundTarget, \" \")), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Tickets sold: \", film.totalsoFar))))), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Enter number of tickets\",\n    name: \"tickets\",\n    onChange: e => onChange(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"header-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Basket total: \\xA3\", bookingTotal)), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"btn btn-light my-1\",\n    to: \"/dashboard\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Go Back\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: e => onSubmit(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(StripeCheckoutButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  })))));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  clearItem: item => dispatch(clearItemFromCart(item)),\n  addItem: item => dispatch(addItem(item)),\n  removeItem: item => dispatch(removeItem(item))\n});\n\nexport default connect(null, mapDispatchToProps)(CheckoutFilm); // the clearItem pattern:\n// onclick triggers clearItem\n// clearItem is dispatched to Props through clearItemFromCart with the item\n// sent to actions, actions finds it in types\n// the reducer filters out the item \n// goes through to root reducer, with new cart object","map":{"version":3,"sources":["/Users/andrewhigton/Documents/mern/SatCinemaClub/client/src/components/checkout-film/Checkout-Film.js"],"names":["React","useEffect","useState","Fragment","connect","useParams","Link","withRouter","Redirect","CheckoutFilm","film","onChange","e","tickets","totalsoFar","parseInt","target","value","setBookingTotal","ticketPrice","setFormData","formData","onSubmit","preventDefault","console","log","updateFilm","history","title","date","crowdfundTarget","bookingTotal","mapDispatchToProps","dispatch","clearItem","item","clearItemFromCart","addItem","removeItem"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,SAAT,QAAyB,cAAzB;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,QAA3B,QAA2C,kBAA3C,C,CAEA;;AACA,OAAO,6BAAP;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAc;AAEjC,QAAMC,QAAQ,GAAGC,CAAC,IAAI;AACpB;AACAC,IAAAA,OAAO,GAAGH,IAAI,CAACI,UAAL,GAAkBC,QAAQ,CAACH,CAAC,CAACI,MAAF,CAASC,KAAV,CAApC;AACAC,IAAAA,eAAe,CAACH,QAAQ,CAACL,IAAI,CAACS,WAAN,CAAR,GAA6BJ,QAAQ,CAACH,CAAC,CAACI,MAAF,CAASC,KAAV,CAAtC,CAAf;AACAG,IAAAA,WAAW,mBAAMC,QAAN;AAAgBP,MAAAA,UAAU,EAAED;AAA5B,OAAX;AACD,GALD;;AAOA,QAAMS,QAAQ,GAAIV,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACW,cAAF;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AAEAK,IAAAA,UAAU,CAACL,QAAD,EAAWM,OAAX,CAAV;AACD,GALD;;AASA,SACA,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAajB,IAAI,CAACkB,KAAlB,CADF,CADF,EAKE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAalB,IAAI,CAACmB,IAAlB,MADF,CALF,EASE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAenB,IAAI,CAACS,WAApB,MADF,CATF,EAaE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA4BT,IAAI,CAACoB,eAAjC,MADF,CAbF,EAgBE;AACA,IAAA,SAAS,EAAC,cADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAqBpB,IAAI,CAACI,UAA1B,CAFF,CAhBF,CADF,CADA,CADF,EA4BM;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,WAAW,EAAC,yBAFd;AAGE,IAAA,IAAI,EAAC,SAHP;AAIE,IAAA,QAAQ,EAAEF,CAAC,IAAID,QAAQ,CAACC,CAAD,CAJzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CA5BN,EAoCM;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAsBmB,YAAtB,CADF,CApCN,EAuCM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,oBAAhB;AAAqC,IAAA,EAAE,EAAC,YAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADA,CAvCN,EA2CM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,OAAO,EAAEnB,CAAC,IAAIU,QAAQ,CAACV,CAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,oBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CA3CN,CADZ,CADA;AAqDD,CAvED;;AAyEA,MAAMoB,kBAAkB,GAAGC,QAAQ,KAAK;AACtCC,EAAAA,SAAS,EAAEC,IAAI,IAAIF,QAAQ,CAACG,iBAAiB,CAACD,IAAD,CAAlB,CADW;AAEtCE,EAAAA,OAAO,EAAEF,IAAI,IAAIF,QAAQ,CAACI,OAAO,CAACF,IAAD,CAAR,CAFa;AAGtCG,EAAAA,UAAU,EAAEH,IAAI,IAAIF,QAAQ,CAACK,UAAU,CAACH,IAAD,CAAX;AAHU,CAAL,CAAnC;;AAMA,eAAe/B,OAAO,CAAC,IAAD,EAAO4B,kBAAP,CAAP,CAAkCvB,YAAlC,CAAf,C,CACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { useParams} from 'react-router';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\n\n// import { clearItemFromCart, addItem, removeItem } from '../../reducers/cart/cart.actions';\nimport './checkout-item.styles.scss';\n\nconst CheckoutFilm = ({ film }) => {\n\n  const onChange = e => {\n    //setFormData({ ...formData, [e.target.name]: e.target.value });\n    tickets = film.totalsoFar + parseInt(e.target.value)\n    setBookingTotal(parseInt(film.ticketPrice) * parseInt(e.target.value));\n    setFormData({ ...formData, totalsoFar: tickets });\n  } \n    \n  const onSubmit = (e) => {\n    e.preventDefault();\n    console.log(formData)\n  \n    updateFilm(formData, history);\n  };\n  \n\n  \n  return (\n  <Fragment>  \n              <div>\n                <form>\n                <div className='checkout-page how-it-works'>\n                  <div className='checkout-header'>\n                    <div className='header-block'>\n                      <span>Film: {film.title}</span>\n                    </div>\n                    \n                    <div className='header-block'>\n                      <span>Date: {film.date} </span>\n                    </div>\n                    \n                    <div className='header-block'>\n                      <span>Price: £{film.ticketPrice} </span>\n                    </div>\n                    \n                    <div className='header-block'>\n                      <span>Crowdfunding Target: {film.crowdfundTarget} </span>\n                    </div>\n                    <div \n                    className='header-block'>\n                      <span>Tickets sold: {film.totalsoFar}</span>\n                    </div>\n                  </div>\n                  </div>\n                  </form>\n                \n\n                    <div className='header-block'>\n                      <input\n                        type='number'\n                        placeholder='Enter number of tickets'\n                        name='tickets'\n                        onChange={e => onChange(e)}\n                      />\n                    </div>\n                    <div className='header-block'>\n                      <span>Basket total: £{bookingTotal}</span>\n                    </div>\n                    <div>\n                    <Link className='btn btn-light my-1' to='/dashboard'>Go Back\n                    </Link>\n                    </div>\n                    <div>\n                      <span onClick={e => onSubmit(e)}> \n                        <StripeCheckoutButton />\n                      </span>\n                    </div>\n                  </div>\n          </Fragment>\n    )\n}\n\nconst mapDispatchToProps = dispatch => ({\n  clearItem: item => dispatch(clearItemFromCart(item)),\n  addItem: item => dispatch(addItem(item)),\n  removeItem: item => dispatch(removeItem(item))\n  })\n\nexport default connect(null, mapDispatchToProps)(CheckoutFilm);\n// the clearItem pattern:\n// onclick triggers clearItem\n// clearItem is dispatched to Props through clearItemFromCart with the item\n// sent to actions, actions finds it in types\n// the reducer filters out the item \n// goes through to root reducer, with new cart object "]},"metadata":{},"sourceType":"module"}