{"ast":null,"code":"import _slicedToArray from \"/Users/andrewhigton/Documents/mern/SatCinemaClub/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/andrewhigton/Documents/mern/SatCinemaClub/client/src/components/booking-page/BookingPage.js\";\n//toto\n// book through landing page, go to a page that tells user your ticket will be sent when film confirmed\n// how to trigger rerender after booking?\n// once they book, take user to their dashboard, with tickets and any films created  \n// can only do this with stripe payouts on server \n// so keep profile separate. use main landing for films. plus your films and tickets link  \n// next: how to create a profile? \n// 5 how do you create one auto? do you create a profile separately? tom doesn't have one.jim does\n// 6 fix css, make flexy for mobile\n// 7 api call on film page? imdb, wiki?  \n// 8 reload dashboard, films not yet loaded - log user out?\n// 9 need to add stripe checkout details   \nimport React, { useEffect, useState, Fragment } from 'react';\nimport { useParams } from 'react-router';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Spinner from '../layout/Spinner';\nimport { connect } from 'react-redux';\nimport { getFilmById, updateFilm } from '../../actions/film';\nimport CheckoutFilm from '../checkout-film/Checkout-Film'; // import { getCurrentProfile, getFilmById } from '../../actions/profile';\n// import { updateFilm } from '../../actions/profile';\n\nimport StripeCheckoutButton from '../../components/stripe-button/stripe-button'; //import queryString from 'query-string';\n\nconst FilmPage = ({\n  updateFilm,\n  getFilmById,\n  film: {\n    film,\n    loading\n  },\n  match,\n  // profile: { profile, loading },\n  history\n}) => {\n  useEffect(() => {\n    getFilmById(match.params._id);\n  }, [loading, getFilmById]); //this creates the state\n\n  const _useState = useState({\n    _id: '',\n    user: '',\n    title: '',\n    date: '',\n    cinema: '',\n    image: '',\n    ticketPrice: '',\n    crowdfundTarget: '',\n    totalsoFar: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        formData = _useState2[0],\n        setFormData = _useState2[1]; // \t//set's the values of the state\n\n\n  useEffect(() => {\n    getFilmById(match.params.id);\n\n    if (!loading && film) {\n      setFormData({\n        _id: film._id,\n        user: film.user,\n        title: film.title,\n        cinema: film.cinema,\n        date: film.date,\n        image: film.image,\n        ticketPrice: film.ticketPrice,\n        crowdfundTarget: film.crowdfundTarget,\n        totalsoFar: film.totalsoFar\n      });\n    }\n  }, [loading, getFilmById]);\n  const _id = formData._id,\n        user = formData.user,\n        title = formData.title,\n        date = formData.date,\n        cinema = formData.cinema,\n        image = formData.image,\n        ticketPrice = formData.ticketPrice,\n        crowdfundTarget = formData.crowdfundTarget,\n        totalsoFar = formData.totalsoFar; //the pattern is this.\n  // 1 initiate consts with above\t\t\n  // 2 onchange calls setformdata with values attached\n  // 3 when is setformdata called, interms of being wrapped in useEffect(fetches current film)?\n  // 4 setFormData sets initial state to values.  \n  // 5 so state values are either '', or the value attached to film. which is there. but not getting them \n  // 6 are we reloading film. is that the problem? \n\n  if (film === null) return null;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(CheckoutFilm, {\n    film: film,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), \"}\");\n};\n\nFilmPage.propTypes = {\n  updateFilm: PropTypes.func.isRequired,\n  // getCurrentProfile: PropTypes.func.isRequired,\n  getFilmById: PropTypes.func.isRequired,\n  film: PropTypes.object.isRequired //profile: PropTypes.object.isRequired\n\n};\n\nconst mapStateToProps = state => ({\n  //profile: state.profile,\n  film: state.film\n});\n\nexport default connect(mapStateToProps, {\n  updateFilm,\n  getFilmById\n})(withRouter(FilmPage));","map":{"version":3,"sources":["/Users/andrewhigton/Documents/mern/SatCinemaClub/client/src/components/booking-page/BookingPage.js"],"names":["React","useEffect","useState","Fragment","useParams","Link","withRouter","Redirect","PropTypes","Spinner","connect","getFilmById","updateFilm","CheckoutFilm","StripeCheckoutButton","FilmPage","film","loading","match","history","params","_id","user","title","date","cinema","image","ticketPrice","crowdfundTarget","totalsoFar","formData","setFormData","id","propTypes","func","isRequired","object","mapStateToProps","state"],"mappings":"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","sourcesContent":["//toto\n// book through landing page, go to a page that tells user your ticket will be sent when film confirmed\n// how to trigger rerender after booking?\n\n// once they book, take user to their dashboard, with tickets and any films created  \n// can only do this with stripe payouts on server \n// so keep profile separate. use main landing for films. plus your films and tickets link  \n// next: how to create a profile? \n\n// 5 how do you create one auto? do you create a profile separately? tom doesn't have one.jim does\n// 6 fix css, make flexy for mobile\n// 7 api call on film page? imdb, wiki?  \n// 8 reload dashboard, films not yet loaded - log user out?\n// 9 need to add stripe checkout details   \n\nimport React, { useEffect, useState, Fragment } from 'react';\nimport { useParams} from 'react-router';\nimport { Link, withRouter, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Spinner from '../layout/Spinner';\nimport { connect } from 'react-redux';\nimport { getFilmById, updateFilm } from '../../actions/film';\nimport CheckoutFilm from '../checkout-film/Checkout-Film'\n// import { getCurrentProfile, getFilmById } from '../../actions/profile';\n// import { updateFilm } from '../../actions/profile';\nimport StripeCheckoutButton from '../../components/stripe-button/stripe-button';\n//import queryString from 'query-string';\n\nconst FilmPage = ({\n\tupdateFilm,\n\tgetFilmById,\n\tfilm: {film, loading},\n\tmatch,\n\t// profile: { profile, loading },\n\thistory\n}) => {\n\tuseEffect(() => {\n\t\tgetFilmById(match.params._id);\n  \t}, [loading, getFilmById]);\n\n//this creates the state\n\tconst [formData, setFormData] = useState({\n\t\t_id: '',\n\t\tuser: '',\n\t\ttitle: '',\n\t\tdate: '',\n\t\tcinema: '',\n\t\timage: '',\n\t\tticketPrice: '',\n\t\tcrowdfundTarget: '',\n\t\ttotalsoFar: ''\n\t});\n\t\n// \t//set's the values of the state\n\tuseEffect(() => {\t\n      \tgetFilmById(match.params.id);\t\n\n\tif(!loading && film) {   \n\t\tsetFormData({\n\t      _id: film._id,\n\t      user: film.user,\n\t      title: film.title,\n\t      cinema: film.cinema,\n\t      date: film.date,\n\t      image: film.image,\n\t      ticketPrice: film.ticketPrice,\n\t      crowdfundTarget: film.crowdfundTarget,\n\t      totalsoFar: film.totalsoFar\n\t    \t\t});\n\t\t\t }\n\t   }, [loading, getFilmById]);\n\n\tconst {\n\t\t_id,\n\t\tuser,\n\t\ttitle,\n\t\tdate,\n\t\tcinema,\n\t\timage,\n\t\tticketPrice,\n\t\tcrowdfundTarget,\n\t\ttotalsoFar\n\t} = formData;\n\n\t//the pattern is this.\n\t// 1 initiate consts with above\t\t\n\t// 2 onchange calls setformdata with values attached\n\t// 3 when is setformdata called, interms of being wrapped in useEffect(fetches current film)?\n\t// 4 setFormData sets initial state to values.  \n\t// 5 so state values are either '', or the value attached to film. which is there. but not getting them \n\t// 6 are we reloading film. is that the problem? \n\t\n\tif (film === null) return null;\n\treturn (\n\t\t<div>\n\t\t\t<CheckoutFilm\n\t\t\tfilm={film}\n\t\t\t />\n\t\t\t}\n\t\t</div>\n\t\t)\n\t};\n\n\nFilmPage.propTypes = {\n\tupdateFilm: PropTypes.func.isRequired,\n\t// getCurrentProfile: PropTypes.func.isRequired,\n\tgetFilmById: PropTypes.func.isRequired,\n\tfilm: PropTypes.object.isRequired,\n\t//profile: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n\t//profile: state.profile,\n\tfilm: state.film\n});\n\nexport default connect(mapStateToProps, { updateFilm, getFilmById })(\n\twithRouter(FilmPage)\n);"]},"metadata":{},"sourceType":"module"}